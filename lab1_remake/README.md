# Theater Management System

–°–∏—Å—Ç–µ–º–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Ç–µ–∞—Ç—Ä–æ–º —Å CLI-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–º –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞–º–∏, –ø–æ—Å—Ç–∞–Ω–æ–≤–∫–∞–º–∏, –∑–∞–ª–∞–º–∏ –∏ –±–∏–ª–µ—Ç–∞–º–∏.

## –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- üèõ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∑–∞–ª–∞–º–∏ —Å —Å–µ–∫—Ç–æ—Ä–∞–º–∏, —Ä—è–¥–∞–º–∏ –∏ –º–µ—Å—Ç–∞–º–∏
- üé≠ –°–æ–∑–¥–∞–Ω–∏–µ –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ—Å—Ç–∞–Ω–æ–≤–∫–∞–º–∏ –∏ —Ä–µ–ø–µ—Ç–∏—Ü–∏—è–º–∏
- üë• –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–µ—Ä—Å–æ–Ω–∞–ª–æ–º (–∞–∫—Ç—ë—Ä—ã, —Ä–µ–∂–∏—Å—Å—ë—Ä—ã, –∫–æ—Å—Ç—é–º–µ—Ä—ã)
- üé´ –ü—Ä–æ–¥–∞–∂–∞ –±–∏–ª–µ—Ç–æ–≤ —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–º —Ü–µ–Ω–æ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ–º
- üíæ –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∏ –∑–∞–≥—Ä—É–∑–∫–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è –≤ JSON
- üé≠ –î–µ—Ç–∞–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Ç–µ–∞—Ç—Ä–µ —á–µ—Ä–µ–∑ –º–µ–Ω—é
- üëî –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–æ—Å—Ç—é–º–∞–º–∏ –∏ –∏—Ö –Ω–∞–∑–Ω–∞—á–µ–Ω–∏–µ –∞–∫—Ç—ë—Ä–∞–º

## –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

```bash
cd src
python main_menu.py
```

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
lab1_remake/
‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îú‚îÄ‚îÄ __init__.py          # –≠–∫—Å–ø–æ—Ä—Ç –≤—Å–µ—Ö –º–æ–¥—É–ª–µ–π
‚îÇ   ‚îú‚îÄ‚îÄ theater.py           # –û—Å–Ω–æ–≤–Ω—ã–µ –∫–ª–∞—Å—Å—ã (Theater, Setting, Ticket, ...)
‚îÇ   ‚îú‚îÄ‚îÄ staff.py             # –°–æ—Ç—Ä—É–¥–Ω–∏–∫–∏ (Person, Staff, Actor, Director, ...)
‚îÇ   ‚îú‚îÄ‚îÄ managers.py          # –ú–µ–Ω–µ–¥–∂–µ—Ä—ã (StaffManager, HallManager, ...)
‚îÇ   ‚îú‚îÄ‚îÄ exception.py         # –ò—Å–∫–ª—é—á–µ–Ω–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ serialization.py     # –°–∏—Å—Ç–µ–º–∞ —Å–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏–∏
‚îÇ   ‚îî‚îÄ‚îÄ main_menu.py         # CLI –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
‚îú‚îÄ‚îÄ tests/
‚îÇ   ‚îî‚îÄ‚îÄ test_theater.py      # –Æ–Ω–∏—Ç-—Ç–µ—Å—Ç—ã (36 —Ç–µ—Å—Ç–æ–≤)
‚îú‚îÄ‚îÄ docs/
‚îÇ   ‚îú‚îÄ‚îÄ class_diagram.puml   # –î–∏–∞–≥—Ä–∞–º–º–∞ –∫–ª–∞—Å—Å–æ–≤
‚îÇ   ‚îú‚îÄ‚îÄ state_diagram.puml   # –î–∏–∞–≥—Ä–∞–º–º–∞ —Å–æ—Å—Ç–æ—è–Ω–∏–π
‚îÇ   ‚îî‚îÄ‚îÄ SERIALIZATION_GUIDE.md  # –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ —Å–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏–∏
‚îú‚îÄ‚îÄ data/                    # –ü—Ä–∏–º–µ—Ä—ã –¥–∞–Ω–Ω—ã—Ö
‚îî‚îÄ‚îÄ README.md
```

## –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

### –û—Å–Ω–æ–≤–Ω—ã–µ –∫–ª–∞—Å—Å—ã

| –ö–ª–∞—Å—Å | –û–ø–∏—Å–∞–Ω–∏–µ |
|-------|----------|
| `Theater` | –ì–ª–∞–≤–Ω—ã–π –∫–ª–∞—Å—Å, –∫–æ–æ—Ä–¥–∏–Ω–∏—Ä—É–µ—Ç –≤—Å–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã |
| `AuditoryHall` | –ó–∞–ª —Å –º–µ—Å—Ç–∞–º–∏ (—Å–µ–∫—Ç–æ—Ä–∞ √ó —Ä—è–¥—ã √ó –º–µ—Å—Ç–∞) |
| `Setting` | –ü–æ—Å—Ç–∞–Ω–æ–≤–∫–∞ —Å –¥–∞—Ç–æ–π, —Ä–µ–∂–∏—Å—Å—ë—Ä–æ–º –∏ –∞–∫—Ç—ë—Ä–∞–º–∏ |
| `Repetition` | –†–µ–ø–µ—Ç–∏—Ü–∏—è —Å –ø–æ—Å–µ—â–∞–µ–º–æ—Å—Ç—å—é |
| `Ticket` | –ë–∏–ª–µ—Ç —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –≥–µ–Ω–µ—Ä–∞—Ü–∏–µ–π ID |
| `Stage` | –°—Ü–µ–Ω–∞ —Å –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏–µ–º |
| `Costume` | –ö–æ—Å—Ç—é–º –¥–ª—è –∞–∫—Ç—ë—Ä–æ–≤ |
| `CostumeRoom` | –ö–æ—Å—Ç—é–º–µ—Ä–Ω–∞—è |

### –°–æ—Ç—Ä—É–¥–Ω–∏–∫–∏

| –ö–ª–∞—Å—Å | –û–ø–∏—Å–∞–Ω–∏–µ |
|-------|----------|
| `Person` | –ë–∞–∑–æ–≤—ã–π –∫–ª–∞—Å—Å (–∏–º—è, –≤–æ–∑—Ä–∞—Å—Ç) |
| `Staff` | –°–æ—Ç—Ä—É–¥–Ω–∏–∫ (–∑–∞—Ä–ø–ª–∞—Ç–∞) |
| `Actor` | –ê–∫—Ç—ë—Ä (—Ä–æ–ª—å, –Ω–∞–∑–Ω–∞—á–µ–Ω–Ω—ã–µ –∫–æ—Å—Ç—é–º—ã) |
| `Director` | –†–µ–∂–∏—Å—Å—ë—Ä (–ø–æ—Å—Ç–∞–≤–ª–µ–Ω–Ω—ã–µ —Å–ø–µ–∫—Ç–∞–∫–ª–∏) |
| `CostumeDesigner` | –ö–æ—Å—Ç—é–º–µ—Ä (—Å–æ–∑–¥–∞–Ω–Ω—ã–µ –∫–æ—Å—Ç—é–º—ã) |

### –ú–µ–Ω–µ–¥–∂–µ—Ä—ã

| –ú–µ–Ω–µ–¥–∂–µ—Ä | –û–ø–∏—Å–∞–Ω–∏–µ |
|----------|----------|
| `StaffManager` | –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞–º–∏ |
| `HallManager` | –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∑–∞–ª–∞–º–∏ |
| `PerformanceManager` | –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ—Å—Ç–∞–Ω–æ–≤–∫–∞–º–∏ –∏ —Ä–µ–ø–µ—Ç–∏—Ü–∏—è–º–∏ |
| `TicketManager` | –ü—Ä–æ–¥–∞–∂–∞ –±–∏–ª–µ—Ç–æ–≤ |
| `ResourceManager` | –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ä–µ—Å—É—Ä—Å–∞–º–∏ (—Å—Ü–µ–Ω—ã, –∫–æ—Å—Ç—é–º–µ—Ä–Ω—ã–µ, –∫–æ—Å—Ç—é–º—ã) |

## –°–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏—è

–°–∏—Å—Ç–µ–º–∞ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –ø–æ–ª–Ω—É—é —Å–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏—é –≤—Å–µ—Ö –æ–±—ä–µ–∫—Ç–æ–≤ –≤ JSON:

```python
from src.serialization import Serializer, register_builtin_types
from src.theater import Theater

# –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è —Ç–∏–ø–æ–≤
register_builtin_types()

# –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ
theater = Theater("Grand Theater")
Serializer.save_to_file(theater, "theater.json")

# –ó–∞–≥—Ä—É–∑–∫–∞
loaded = Serializer.load_from_file("theater.json")
```

üìñ **–ü–æ–¥—Ä–æ–±–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ:** [docs/SERIALIZATION_GUIDE.md](docs/SERIALIZATION_GUIDE.md)

## –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

```bash
# –ó–∞–ø—É—Å—Ç–∏—Ç—å –≤—Å–µ —Ç–µ—Å—Ç—ã
venv/bin/python -m pytest tests/ -v

# –ó–∞–ø—É—Å—Ç–∏—Ç—å —Ç–µ—Å—Ç—ã —Å–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏–∏
venv/bin/python -m pytest tests/test_theater.py::TestSerialization -v

# –ó–∞–ø—É—Å—Ç–∏—Ç—å —Ç–µ—Å—Ç—ã —Å –ø–æ–∫—Ä—ã—Ç–∏–µ–º
venv/bin/python -m pytest tests/ --cov=src -v
```

## CLI –∫–æ–º–∞–Ω–¥—ã

| ‚Ññ | –ö–æ–º–∞–Ω–¥–∞ | –û–ø–∏—Å–∞–Ω–∏–µ |
|---|---------|----------|
| 1 | –î–æ–±–∞–≤–∏—Ç—å –∑–∞–ª | –°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–≥–æ –∑–∞–ª–∞ —Å –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏ |
| 2 | –î–æ–±–∞–≤–∏—Ç—å –ø–æ—Å—Ç–∞–Ω–æ–≤–∫—É | –°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–π –ø–æ—Å—Ç–∞–Ω–æ–≤–∫–∏ |
| 3 | –î–æ–±–∞–≤–∏—Ç—å –∞–∫—Ç–µ—Ä–∞ | –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –∞–∫—Ç—ë—Ä–∞ –≤ —Ç—Ä—É–ø–ø—É |
| 4 | –î–æ–±–∞–≤–∏—Ç—å —Ä–µ–∂–∏—Å—Å–µ—Ä–∞ | –î–æ–±–∞–≤–ª–µ–Ω–∏–µ —Ä–µ–∂–∏—Å—Å—ë—Ä–∞ |
| 5 | –ü—Ä–æ–¥–∞—Ç—å –±–∏–ª–µ—Ç | –ü—Ä–æ–¥–∞–∂–∞ –≤—ã–±—Ä–∞–Ω–Ω–æ–≥–æ –±–∏–ª–µ—Ç–∞ |
| 6 | –ü–æ–∫–∞–∑–∞—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é | –î–µ—Ç–∞–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Ç–µ–∞—Ç—Ä–µ |
| 7 | –°–æ—Ö—Ä–∞–Ω–∏—Ç—å —Å–æ—Å—Ç–æ—è–Ω–∏–µ | –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ JSON |
| 8 | –ó–∞–≥—Ä—É–∑–∏—Ç—å —Å–æ—Å—Ç–æ—è–Ω–∏–µ | –ó–∞–≥—Ä—É–∑–∫–∞ –∏–∑ JSON |
| 9 | –ü—Ä–∏–≤—è–∑–∞—Ç—å –ø–æ—Å—Ç–∞–Ω–æ–≤–∫—É –∫ –∑–∞–ª—É | –°–æ–∑–¥–∞–Ω–∏–µ –±–∏–ª–µ—Ç–æ–≤ |
| 10 | –ò–∑–º–µ–Ω–∏—Ç—å –Ω–∞–∑–≤–∞–Ω–∏–µ —Ç–µ–∞—Ç—Ä–∞ | –ü–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞–Ω–∏–µ |
| 11 | –î–æ–±–∞–≤–∏—Ç—å –∞–∫—Ç–µ—Ä–∞ –∫ –ø–æ—Å—Ç–∞–Ω–æ–≤–∫–µ | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ –∞–∫—Ç—ë—Ä–∞ |
| 12 | –°–æ–∑–¥–∞—Ç—å –∫–æ—Å—Ç—é–º | –°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–≥–æ –∫–æ—Å—Ç—é–º–∞ |
| 13 | –ù–∞–∑–Ω–∞—á–∏—Ç—å –∫–æ—Å—Ç—é–º –∞–∫—Ç–µ—Ä—É | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ –∫–æ—Å—Ç—é–º–∞ |
| 14 | –ü–æ–∫–∞–∑–∞—Ç—å –¥–æ—Å—Ç—É–ø–Ω—ã–µ –±–∏–ª–µ—Ç—ã | –°–ø–∏—Å–æ–∫ –Ω–µ–ø—Ä–æ–¥–∞–Ω–Ω—ã—Ö –±–∏–ª–µ—Ç–æ–≤ |

## –î–∏–∞–≥—Ä–∞–º–º—ã

### –î–∏–∞–≥—Ä–∞–º–º–∞ –∫–ª–∞—Å—Å–æ–≤

–°–º. [docs/class_diagram.puml](docs/class_diagram.puml)

```
Theater *-- StaffManager
Theater *-- HallManager  
Theater *-- PerformanceManager
Theater *-- TicketManager
Theater *-- ResourceManager

StaffManager o-- Staff
HallManager o-- AuditoryHall
...
```

### –î–∏–∞–≥—Ä–∞–º–º–∞ —Å–æ—Å—Ç–æ—è–Ω–∏–π

–°–º. [docs/state_diagram.puml](docs/state_diagram.puml)

–û—Å–Ω–æ–≤–Ω—ã–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è:
- `Idle` ‚Äî –æ–∂–∏–¥–∞–Ω–∏–µ –∫–æ–º–∞–Ω–¥—ã
- `AddingHall`, `AddingSetting`, `AddingStaff` ‚Äî –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ —ç–ª–µ–º–µ–Ω—Ç–æ–≤
- `BindingSettingToHall` ‚Äî –ø—Ä–∏–≤—è–∑–∫–∞ –ø–æ—Å—Ç–∞–Ω–æ–≤–∫–∏ –∫ –∑–∞–ª—É
- `SellingTicket` ‚Äî –ø—Ä–æ–¥–∞–∂–∞ –±–∏–ª–µ—Ç–∞
- `ViewingInfo` ‚Äî –ø—Ä–æ—Å–º–æ—Ç—Ä –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏
- `SavingState`, `LoadingState` ‚Äî —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ/–∑–∞–≥—Ä—É–∑–∫–∞

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ –ø—Ä–∏–Ω—Ü–∏–ø—ã

1. **Single Responsibility** ‚Äî –∫–∞–∂–¥—ã–π –∫–ª–∞—Å—Å –æ—Ç–≤–µ—á–∞–µ—Ç –∑–∞ –æ–¥–Ω—É –∑–∞–¥–∞—á—É
2. **–ò–Ω–∫–∞–ø—Å—É–ª—è—Ü–∏—è** ‚Äî –ø—Ä–∏–≤–∞—Ç–Ω—ã–µ –∞—Ç—Ä–∏–±—É—Ç—ã —Å –≥–µ—Ç—Ç–µ—Ä–∞–º–∏
3. **–°–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏—è —á–µ—Ä–µ–∑ `__type__`** ‚Äî —è–≤–Ω–∞—è –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è —Ç–∏–ø–æ–≤
4. **–ú–µ–Ω–µ–¥–∂–µ—Ä—ã** ‚Äî —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ –ª–æ–≥–∏–∫–∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø–æ –∫–ª–∞—Å—Å–∞–º
5. **CLI –∫–∞–∫ —Ñ–∞—Å–∞–¥** ‚Äî –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –æ—Ç–¥–µ–ª—ë–Ω –æ—Ç –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∏

## –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

- Python 3.8+
- –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∞—è –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ (json, datetime, typing, enum)

## –õ–∏—Ü–µ–Ω–∑–∏—è

–£—á–µ–±–Ω—ã–π –ø—Ä–æ–µ–∫—Ç –¥–ª—è –∫—É—Ä—Å–∞ "–ü—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –û–û–ü".